## Memc Load (Go)

Скрипт загрузки файлов в формате protobuf в Memcached. Задача была создать мультипоточную версию скрипта на Go и сравнить ее с аналогичным скриптом на Python.

Используется Golang 1.11

### Параметры запуска:

* dry - тестовый запуск обработки
* pattern - шаблон имени файла для обработки
* lworkers - количество Line воркеров (обработка строк в файлах)
* mworkers - количество Memc воркеров (загрузка в Memcache)
* test - режим тестирования данных
* log - файл логов
* idfa, gaid, adid, dvid - адреса серверов Memcached для данных соответствующего типа

### Пример запуска

Запуск обработки файлов с 500+4 воркерами

    go build
    memcload --pattern=./memcload/*.tsv.gz --mworkers=500 --lworkers=4  --log=log_1.log

### Результаты тестирования

Количество воркеров в каждом случае подобрано исходя из максимально возможной утилизации указанных ресурсов, с целью выяснить наименьшее время выполнения задания.
Тестирование проводилось на двух файлах, примерно по 3,4 млн записей в каждом.

Для тестов использовалась одна VM в качестве клиента (1 Core, 4 Gb RAM) и две VM Memcached (1 Core, 4 Gb RAM).
Утилизация CPU на машине клиента составила от 40 до 100%, на машинах Memcached - около 40%.

Python: число воркеров - 450, утилизация CPU - 100%, время выполнения задания - 36 минут

Go: число воркеров - 1800 memc + 4 line, утилизация CPU - 40%, время выполнения задания - 10 минут

